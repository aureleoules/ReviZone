angular.module("revizone").factory("UtilsFactory",function(){return{makeAlert:function(d,c,b,a){$.notify({message:d,url:b},{placement:{from:"top",align:"right"},type:c,offset:5,spacing:50,z_index:1031,delay:5000,timer:500,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"}})}}}).service("AuthService",function(e,g,m,h){var c="a65f1va98";var n=false;var i;function k(){var p=window.localStorage.getItem(c);if(p){b(p)}}function a(p){window.localStorage.setItem(c,p);b(p)}function b(p){n=true;i=p;g.defaults.headers.common.Authorization=i}function l(){i=undefined;n=false;g.defaults.headers.common.Authorization=undefined;window.localStorage.removeItem(c)}var j=function(p){return e(function(r,q){g.post(m.url+"/signup",p).then(function(s){if(s.data.success){r(s.data.msg);h.$emit("userLoggedOut")}else{q(s.data.msg)}})})};var d=function(){return e(function(q,p){g.get(m.url+"/getuser").then(function(r){if(r.data){q(r.data)}else{p(r.data.msg)}})})};var f=function(p){return e(function(r,q){g.post(m.url+"/authenticate",p).then(function(s){if(s.data.success){a(s.data.token);r(s.data.msg);h.$emit("userLoggedIn")}else{q(s.data.msg)}})})};var o=function(){l()};k();return{login:f,register:j,logout:o,isAuthenticated:function(){return n},getUser:d}}).factory("AuthInterceptor",function(a,b,c){return{responseError:function(d){a.$broadcast({401:c.notAuthenticated,}[d.status],d);return b.reject(d)}}}).config(function(a){a.interceptors.push("AuthInterceptor")});